{% extends 'customer/base.html' %}
{% load static %}
{% block link_block %}
<link rel="stylesheet" href="{% static 'customer/profile.css' %}">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

{% endblock %}
{% block body_content %}
{% include 'customer/custmor_nav.html' %}

<!-- Secondary Navbar -->
<div class="navbar seccond_nav">
    <div class="container-fluid d-flex justify-content-between align-items-center">
        <p class="navbar-brand text-secondary m-0">User Profile</p>
        <a class="btn btn-outline-success" href="{% url 'logout' %}">Logout</a>
    </div>
</div>
<br>

<!-- Split Page Layout -->
<div class="container">
    <div class="row">
        <!-- Left Section: Links -->
        <div class="col-md-4 side-links">
            <h4 class="text-secondary">Navigation</h4><br>
            <a class="link" href="">Home</a>
            <hr>
            <a class="link" href="{% url 'customer:order_history' %}">My Orders</a>
            <hr>
            <a class="link" href="{% url 'customer:wallet' %}">My wallet</a>
            <hr>
           
        </div>

        <!-- Right Section: Profile Form -->
        <div class="col-md-8">
            <div class="profile-container">
                <h2 class="text-center text-secondary mb-4">Update Profile</h2>
                <form action="{% url 'customer:customerProfile' %}" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <!-- Profile Photo -->
                    <div>
                    <div class="photo">
                        {% if not customer.photo %}
                            <img src="{% static 'images/download.jpg' %}" alt="Profile Photo" class="profile-photo" id="displayPhoto">
                        {% else %}
                            <img src="{{ customer.photo.url }}" alt="Profile Photo" class="profile-photo" id="displayPhoto">
                        {% endif %}
                    </div>
                        <div class="mt-3">
                            <label for="uploadimage" class="form-label">Upload Image</label>
                            {{ update_form.photo }}
                            <small class="text-danger">{{ update_form.photo.errors }}</small>
                        </div>
                    </div>

                    <!-- Update Form Fields -->
                    <div class="mb-3">
                        <label for="email" class="form-label">Email ID</label>
                        <p class="text-secondary">{{ customer.customer_id.email }}</p>
                    </div>
                    <div class="mb-3">
                        <label for="fullName" class="form-label">Full Name</label>
                        {{ update_form.full_name}}
                        <small class="text-danger">{{ update_form.full_name.errors }}</small>
                    </div>
                    <div class="mb-3">
                        <label for="phoneNumber" class="form-label">Phone Number</label>
                        {{ update_form.phone_number }}
                        <small class="text-danger">{{ update_form.phone_number.errors }}</small>
                    </div>
                    <div class="mb-3">
                        <label for="passwordReset" class="form-label">Password</label>
                        <a href="{% url 'customer:user_auth' customer.customer_id.id %}" id="passwordReset" class="link p-3">Reset Password</a>
                    </div>
                    <div class="mb-3">
                        <label for="addressUpdate" class="form-label">Address</label>
                        <a href="{% url 'customer:address' customer.id %}" id="addressUpdate" class="link p-3">Add/Update Address</a>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn btn-success w-100">Update Profile</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% include 'footer.html' %}
<!-- Script for Photo Preview -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
{% if messages %}
{% for msg in messages %}
<script>
    Toastify({
        text: "{{msg}}",
        className: "info",
        style: {
          background: "linear-gradient(to right, #00b09b, #96c93d)",
        }
      }).showToast();
</script>
{% endfor %}
{% endif %}

{% endblock %}
